"use strict";(self.webpackChunkwel_doc=self.webpackChunkwel_doc||[]).push([[1151],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var r=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,s=e.mdxType,a=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),m=s,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||a;return n?r.createElement(g,o(o({ref:t},c),{},{components:n})):r.createElement(g,o({ref:t},c))}));function g(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var a=n.length,o=new Array(a);o[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:s,o[1]=i;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9686:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var r=n(7462),s=(n(7294),n(3905));const a={sidebar_position:2},o="Features",i={unversionedId:"general/structure/view-model",id:"general/structure/view-model",title:"Features",description:"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430",source:"@site/docs/general/structure/view-model.md",sourceDirName:"general/structure",slug:"/general/structure/view-model",permalink:"/wel-doc/docs/general/structure/view-model",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/general/structure/view-model.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Intro",permalink:"/wel-doc/docs/general/structure/intro"},next:{title:"Units",permalink:"/wel-doc/docs/general/structure/units"}},l={},p=[{value:"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430",id:"\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430",level:2},{value:"\u0420\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432",id:"\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435-\u0444\u0430\u0439\u043b\u043e\u0432",level:2},{value:"\u041f\u043e \u043f\u0430\u043f\u043a\u0430\u043c",id:"\u043f\u043e-\u043f\u0430\u043f\u043a\u0430\u043c",level:3},{value:"\u0412\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b",id:"\u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435-\u0444\u0430\u0439\u043b\u044b",level:2},{value:"helpers",id:"helpers",level:3},{value:"request",id:"request",level:3},{value:"types",id:"types",level:3},{value:"constants",id:"constants",level:3},{value:"styles",id:"styles",level:3},{value:"hooks",id:"hooks",level:3}],c={toc:p},u="wrapper";function d(e){let{components:t,...a}=e;return(0,s.kt)(u,(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"features"},"Features"),(0,s.kt)("h2",{id:"\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430"},"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430"),(0,s.kt)("p",null,"\u041f\u0430\u043f\u043a\u0430 features \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0431\u043e\u0439 \u043c\u0435\u0441\u0442\u043e, \u0433\u0434\u0435 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430 \u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.\n\u041a\u0430\u0436\u0434\u0430\u044f \u0444\u0438\u0447\u0430 \u0441\u043b\u0443\u0436\u0438\u0442 \u0434\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432, \u043c\u043e\u0434\u0435\u043b\u0435\u0439, \u0445\u0443\u043a\u043e\u0432,\n\u0445\u0435\u043b\u043f\u0435\u0440\u043e\u0432 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u043c\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.\n\u0412 \u043f\u0430\u043f\u043a\u0435 features \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u0440\u0438\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u043e\u0432 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438:"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u043c:")," \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u043f\u043a\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 features.\n\u041a\u0430\u0436\u0434\u0430\u044f \u043f\u0430\u043f\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u043e\u0431\u043e\u0439 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u0438 \u0444\u0430\u0439\u043b\u043e\u0432, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"features\n-- profile\n-- createPost\n-- gallery\n-- onBoarding\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u0420\u0430\u0437\u0434\u043b\u0435\u043d\u0438\u0435 \u043b\u043e\u0433\u0438\u043a\u0438 \u0438 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f:")," \u041e\u0442\u0434\u0435\u043b\u044f\u0439\u0442\u0435 \u043b\u043e\u0433\u0438\u043a\u0443 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u043e\u0442 \u0438\u0445 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f. \u0415\u0441\u043b\u0438\n\u0412\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u043c\u043e\u043f\u043d\u0435\u043d\u0442\u043e\u0432 (\u0444\u0430\u0439\u043b\u044b .tsx) \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c\u0441\u044f \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u043c\u0435\u043d\u044c\u0448\u0435 \u043b\u043e\u0433\u0438\u043a\u0438. \u041b\u043e\u0433\u0438\u043a\u0443 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u043d\u043e\u0441\u0438\u0442\u044c\n\u043b\u0438\u0431\u043e \u0432 \u044d\u0444\u0444\u0435\u043a\u0442\u043e\u0440 \u043c\u043e\u0434\u0435\u043b\u0438, \u043b\u0438\u0431\u043e \u0432 \u0445\u0443\u043a\u0438. "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/profile/model.ts"',jsx:!0,title:'"src/features/profile/model.ts"'},"import { createEffect, createEvent, createStore } from 'effector';\nimport { api } from '../../api';\nimport { Profile, UpdateProfilePayload } from './types';\n\n// \u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0434\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f\nexport const updateProfile = createEvent<UpdateProfilePayload>();\n\n// \u042d\u0444\u0444\u0435\u043a\u0442 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\nexport const fetchProfileFx = createEffect(async (userId: string) => {\n  const response = await api.get<Profile>(`/profiles/${userId}`);\n  return response.data;\n});\n\n// \u042d\u0444\u0444\u0435\u043a\u0442 \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435\nexport const saveProfileFx = createEffect(async (payload: UpdateProfilePayload) => {\n  const response = await api.put<Profile>(`/profiles/${payload.userId}`, payload);\n  return response.data;\n});\n\n\n// \u0421\u0442\u043e\u0440 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f\nexport const $profile = createStore<Profile | null>(null)\n  .on(fetchProfileFx.doneData, (_, profile) => profile)\n  .on(saveProfileFx.doneData, (_, updatedProfile) => updatedProfile)\n  .on(updateProfile, (profile, updatedFields) => {\n    if (!profile) return profile;\n    return { ...profile, ...updatedFields };\n  });\n\n// \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u044d\u0444\u0444\u0435\u043a\u0442\u043e\u0432\nfetchProfileFx.fail.watch(({ error }) => {\n  console.error('Failed to fetch profile:', error);\n});\n\nsaveProfileFx.fail.watch(({ error }) => {\n  console.error('Failed to save profile:', error);\n});\n\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/profile/Profile.tsx"',jsx:!0,title:'"src/features/profile/Profile.tsx"'},"import React, { useEffect } from 'react';\nimport { useStore } from 'effector-react';\nimport { useParams } from 'react-router-dom';\nimport { $profile, fetchProfileFx } from './model';\nimport { Profile } from './types';\n\nexport const Profile = () => {\n  const { userId } = useParams<{ userId: string }>();\n  const profile = useStore($profile);\n\n  useEffect(() => {\n    fetchProfileFx(userId);\n  }, [userId]);\n\n  if (!profile) return null;\n\n  return (\n    <View>\n      <Text>{profile.name}</Text>\n      <Text>{profile.bio}</Text>\n    </div>\n  );\n};\n")),(0,s.kt)("details",null,(0,s.kt)("summary",null,"\u0421\u043b\u043e\u0436\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440"),(0,s.kt)("p",null,"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0444\u0430\u0439\u043b \u0444\u0438\u0447\u0438:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/events/EventsList.tsx"',jsx:!0,title:'"src/features/events/EventsList.tsx"'},'import React, { useEffect } from "react";\nimport ScreenList from "../lists/ScreenList";\nimport { eventsListModel } from "./model";\n\n\nconst EventsList = () => {\n  useEffect(() => {\n    eventsListModel.init();\n  });\n\n  return (\n    <ScreenList\n      categories={categories}\n      model={eventsListModel}\n      Item={EventCard}\n      detailsLink={Links.EVENT_DETAILS}\n      keyExtractor={idExtractor}\n    />\n  );\n};\n')),(0,s.kt)("p",null,"\u0424\u0430\u0439\u043b \u043c\u043e\u0434\u0435\u043b\u0438:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/events/model.ts"',jsx:!0,title:'"src/features/events/model.ts"'},'import { createPaginatedListModel } from "../../lib/models/pagination";\nimport api from "../../api";\n\nexport const eventsListModel = createPaginatedListModel({\n  request: api.events.get,\n  itemExtractor: (response) => response.events,\n  nextPageFilter: ({ page, total, response }) => {\n    if (response.events_count < total) return page + 1;\n    return null;\n  },\n});\n')),(0,s.kt)("p",null,"\u0414\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0441\u0442\u043e?",(0,s.kt)("br",null),"\n\u0422\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043c\u043e\u0434\u0435\u043b\u044c eventsListModel, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0445\u0440\u0430\u043d\u0438\u0442 \u0432\u0441\u044e \u043b\u043e\u0433\u0438\u043a\u0443 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 ScreenList\n\u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043b\u043e\u0433\u0438\u043a\u0443 \u0446\u0435\u043b\u0435\u043a\u043e\u043c \u0438 \u0437\u043d\u0430\u0435\u0442 \u043a\u0430\u043a \u0441 \u043d\u0435\u0439 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c.\n\u0422\u0440\u044e\u043a \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u043d\u043e \u0438 \u0446\u0435\u043b\u044b\u0435 \u043c\u043e\u0434\u0435\u043b\u0438,\n\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0434\u043b\u044f \u043b\u0438\u0441\u0442\u043e\u0432 \u0441 \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u0435\u0439 \u0438\u043b\u0438 \u0434\u043b\u044f \u0444\u043e\u0440\u043c"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f ScreenList:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/lists/ScreenList.tsx"',jsx:!0,title:'"src/features/lists/ScreenList.tsx"'},"\nexport type ScreenListProps<T, L extends Links, P extends void | any> = {\n  model: PaginatedListModel<T, any, P>;\n  Item: ComponentType<ScreenListItemProps<T>>\n  detailsLink: ScreensProps[L] extends { item: T; index?: number } ? L : never;\n  keyExtractor: (item: T, index: number) => string;\n  categories: SelectItem[];\n};\n\nconst ScreenList = <T, L extends Links, P extends void | any>({\n  categories,\n  model,\n  Item,\n  detailsLink,\n  keyExtractor,\n}: ScreenListProps<T, L, P>) => {\n  const navigate = useNavigate();\n  const list = usePaginatedListModel(model);\n\n  const goToDetails = useCallback((item: T, index: number) => {\n    navigate(detailsLink, { item, index });\n  }, []);\n\n  const renderItem: ListRenderItem<T> = useCallback(\n    ({ item, index }) => {\n      return (\n        <Item\n          index={index}\n          item={item}\n          onPress={goToDetails}\n          style={categorisedListStyles.card}\n        />\n      );\n    },\n    [Item, goToDetails]\n  );\n\n  return (\n    <CategorisedList\n      keyExtractor={keyExtractor}\n      refreshing={list.isRefreshing}\n      categories={categories}\n      data={list.items}\n      renderItem={renderItem}\n      onRefresh={model.refreshSync}\n      onEndReached={model.getNextSync}\n    />\n  );\n};\n\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f PaginatedListModel:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/lib/models/padinatedListModel/model.ts"',jsx:!0,title:'"src/features/lib/models/padinatedListModel/model.ts"'},'import { attach, createEffect, createEvent, restore, sample } from "effector";\n\nexport class PaginatedListModel<T, R, P> {\n  private readonly request;\n  private readonly itemExtractor;\n  private readonly nextPageGetter;\n  private readonly nextPage = createStateModel<number | null>(1);\n  private readonly defaultProps;\n\n  public readonly init = createEvent<P>();\n\n  public constructor({\n    request,\n    itemExtractor,\n    nextPageFilter,\n    defaultProps,\n  }: PaginatedListModelProps<T, R, P>) {\n    this.defaultProps = defaultProps;\n    this.request = request;\n    this.itemExtractor = itemExtractor;\n    this.nextPageGetter = nextPageFilter;\n\n    this.get.done.watch(this.resetListWith);\n    this.refresh.done.watch(this.resetListWith);\n\n    sample({\n      source: this.$items,\n      clock: this.getNextPageFx.done,\n      fn: (items, { result, params }) => {\n        if (!result || !params.page) return;\n        const newItems = this.itemExtractor(result);\n        return {\n          newItems,\n          total: newItems.length + items.length,\n          page: params.page,\n          response: result,\n        };\n      },\n    }).watch((props) => {\n      if (!props) return;\n      const { newItems, ...nextPageProps } = props;\n      this.addItems(newItems);\n      const nextPage = this.nextPageGetter(nextPageProps);\n      this.nextPage.set(nextPage);\n    });\n\n    sample({\n      source: this.$items,\n      clock: this.init,\n      filter: (items) => !items.length,\n      fn: (_, props) => props,\n    }).watch(this.getSync);\n  }\n\n  private readonly resetListWith = ({ result }: { result: R }) => {\n    const items = this.itemExtractor(result);\n    this.setItems(items);\n    const nextPage = this.nextPageGetter({\n      total: items.length,\n      response: result,\n      page: 1,\n    });\n    this.nextPage.set(nextPage);\n  };\n\n  public readonly get = createEffect((props: P) => {\n    return this.request({\n      ...props,\n      page: 1,\n    });\n  });\n  public readonly $isLoading = this.get.pending;\n  public readonly getSync = (props: P) => {\n    this.get(props).catch(noop);\n  };\n\n  private getNextPageFx = createEffect(\n    ({ page, isLoading }: GetNextFxProps<P>) => {\n      if (!page || page === 1 || isLoading) return null;\n      return this.request({\n        ...this.defaultProps!,\n        page,\n      });\n    }\n  );\n  public readonly $isNextLoading = this.getNextPageFx.pending;\n\n  public readonly getNext = attach({\n    source: {\n      page: this.nextPage.$state,\n      isLoading: this.$isNextLoading,\n    },\n    mapParams: (_: void, { page, isLoading }) => ({ page, isLoading }),\n    effect: this.getNextPageFx,\n  });\n  public readonly getNextSync = () => {\n    this.getNext().catch(noop);\n  };\n\n  public readonly refresh = createEffect(() => {\n    return this.get(this.defaultProps!);\n  });\n  public readonly $isRefreshing = this.refresh.pending;\n  public readonly refreshSync = () => {\n    this.refresh().catch(noop);\n  };\n\n  public readonly setItems = createEvent<T[]>();\n  public readonly addItems = createEvent<T[]>();\n  public readonly $items = restore<T[]>(this.setItems, []).on(\n    this.addItems,\n    (state, payload) => [...state, ...payload]\n  );\n\n  public readonly reset = () => {\n    this.nextPage.reset();\n    this.setItems([]);\n  };\n}\n\nexport const createPaginatedListModel = <T, R, P>(\n  props: PaginatedListModelProps<T, R, P>\n) => {\n  return new PaginatedListModel(props);\n};\n\n')),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f usePaginatedListModel:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="src/features/lib/models/padinatedListModel/hooks.ts"',title:'"src/features/lib/models/padinatedListModel/hooks.ts"'},'import { useStore } from "effector-react";\nimport { PaginatedListModel } from "./model";\n\nexport function usePaginatedListModel<T, R, P>(\n  model: PaginatedListModel<T, R, P>\n) {\n  const isRefreshing = useStore(model.$isRefreshing);\n  const isLoading = useStore(model.$isLoading);\n  const isNextLoading = useStore(model.$isNextLoading);\n  const items = useStore(model.$items);\n\n  return { items, isLoading, isNextLoading, isRefreshing };\n}\n\n'))),(0,s.kt)("h2",{id:"\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435-\u0444\u0430\u0439\u043b\u043e\u0432"},"\u0420\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432"),(0,s.kt)("p",null,"\u0412 \u0441\u043b\u0443\u0447\u0430\u0435, \u043a\u043e\u0433\u0434\u0430 \u043e\u0434\u043d\u0430 \u0444\u0438\u0447\u0430 \u0438\u043c\u0435\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0430\u0441\u043f\u0435\u043a\u0442\u043e\u0432 \u0438\u043b\u0438 \u043f\u043e\u0434\u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u0438\u043b\u0438 \u0435\u0441\u043b\u0438 \u0444\u0430\u0439\u043b \u043c\u043e\u0434\u0435\u043b\u0438 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0441\u044f\n\u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u0438\u043c, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u0435\u0433\u043e \u043d\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0444\u0430\u0439\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0434\u043b\u044f\n\u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0430\u0441\u043f\u0435\u043a\u0442\u0430 \u0444\u0438\u0447\u0438. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0444\u0438\u0447\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b\n\u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f\u043c\u0438."),(0,s.kt)("p",null,"\u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0435\u0439, \u0432 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u044f \u043f\u0440\u0435\u0444\u0438\u043a\u0441 ",(0,s.kt)("inlineCode",{parentName:"p"},"model."),". "),(0,s.kt)("details",null,(0,s.kt)("summary",null,"\u041f\u0440\u0438\u043c\u0435\u0440"),(0,s.kt)("p",null,"**\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0430\u043f\u043a\u0438"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text",metastring:'title="src/features/users"',title:'"src/features/users"'},"features\n  -- userManagement\n    --- UserList.tsx\n    --- PermissionList.tsx\n    --- model.ts\n    --- model.permissions.ts\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/users/model.ts"',jsx:!0,title:'"src/features/users/model.ts"'},"import { createEffect, createEvent, createStore } from 'effector';\nimport { api } from '../../api';\nimport { User } from './types';\n\nexport const fetchUsersFx = createEffect(async () => {\n  const response = await api.get<User[]>(`/users`);\n  return response.data;\n});\n\nfetchUsersFx.fail.watch(({ error }) => {\n  console.error('Failed to fetch users:', error);\n});\n\nexport const $users = createStore<User[]>([])\n    .on(fetchUsersFx.doneData, (_, users) => users);\n\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f\u043c\u0438:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/users/model.permissions.ts"',jsx:!0,title:'"src/features/users/model.permissions.ts"'},"import { createEffect, createEvent, createStore } from 'effector';\nimport { api } from '../../api';\nimport { Permission } from './types';\n\nexport const fetchPermissionsFx = createEffect(async () => {\n  const response = await api.get<Permission[]>(`/permissions`);\n  return response.data;\n});\n\nfetchPermissionsFx.fail.watch(({ error }) => {\n  console.error('Failed to fetch permissions:', error);\n});\n\nexport const $permissions = createStore<Permission[]>([]);\n    .on(fetchPermissionsFx.doneData, (_, permissions) => permissions);\n"))),(0,s.kt)("details",null,(0,s.kt)("summary",null,"\u0421\u043b\u043e\u0436\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0430\u043f\u043a\u0438")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text",metastring:'title="src/features/singUp"',title:'"src/features/singUp"'},"\n singUp\n \u251c\u2500\u2500 country\n \u2502   \u251c\u2500\u2500 model.ts\n \u2502   \u2514\u2500\u2500 CountriesList.tsx\n \u251c\u2500\u2500 phone\n \u2502   \u251c\u2500\u2500 model.ts \n \u2502   \u2514\u2500\u2500 PhoneInput.tsx\n \u251c\u2500\u2500 userData\n \u2502   \u251c\u2500\u2500 model.ts\n \u2502   \u2514\u2500\u2500 UserDataForm.tsx\n \u251c\u2500\u2500 model.ts\n \u251c\u2500\u2500 model.password.tsx\n \u2514\u2500\u2500 request.ts\n\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u041c\u043e\u0434\u0435\u043b\u0438")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/singUp/country/model.ts"',jsx:!0,title:'"src/features/singUp/country/model.ts"'}," export const signUpCountryModel = createStateModel<Country | null>(\n  DEFAULT_COUNTRY\n )\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/singUp/phone/model.ts"',jsx:!0,title:'"src/features/singUp/phone/model.ts"'}," export const signUpPhoneModel = createPhoneEnterModel()\n\n sample({\n   clock: signUpCountryModel.$state,\n   source: signUpPhoneModel.$phoneNumber,\n   fn: (phone, country) => ({ phone, country }),\n }).watch(({ phone, country }) => {\n   if (phone) return\n   signUpPhoneModel.setCountry(country)\n })\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/singUp/userData/model.ts"',jsx:!0,title:'"src/features/singUp/userData/model.ts"'}," export const signUpUserDataFormSchema: ObjectSchema<SignUpUserDataForm> = yup\n  .object()\n  .shape({\n    name: stringSchema().trim().min(1),\n    lastName: stringSchema().trim().min(1),\n    birthDate: yup.date().default(INITIAL_DATE).max(new Date()).required(),\n    email: stringSchema().email(),\n  })\n export const signUpUserDataFormModel = createFormModel(signUpUserDataFormSchema)\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/singUp/model.passwords.ts"',jsx:!0,title:'"src/features/singUp/model.passwords.ts"'}," const signUpPasswordsFormSchema = passwordsFormSchema.concat(\n  yup.object({\n    userAgreement: yup.boolean().default(false).required(),\n  })\n)\n\n export const signUpPasswordsFormModel = createFormModel(\n   signUpPasswordsFormSchema\n )\n\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/singUp/model.passwords.ts"',jsx:!0,title:'"src/features/singUp/model.passwords.ts"'}," export const $signUpFormData = combine({\n  user: signUpUserDataFormModel.$store,\n  phone: signUpPhoneModel.$phoneNumber,\n  country: signUpCountryModel.$state,\n  passwords: signUpPasswordsFormModel.$store,\n })\n\n export const resetSignUpFormData = () => {\n   signUpUserDataFormModel.reset()\n   signUpPhoneModel.reset()\n   signUpCountryModel.reset()\n   signUpPasswordsFormModel.reset()\n }\n\n export type SignUpFormData = {\n   user: SignUpUserDataForm\n   country: Country | null\n   phone: string\n   passwords: PasswordsFormModel\n }\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"\u0417\u0430\u043f\u0440\u043e\u0441")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/singUp/request.ts"',jsx:!0,title:'"src/features/singUp/request.ts"'}," export const signUp = attach({\n  source: $signUpFormData,\n  mapParams: (_: void, props) => ({\n    ...convertSignUpFormToSignUpBody(props),\n    is_manager: false,\n    is_superuser: false,\n  }),\n  effect: api.users.signUp,\n })\n\n export const signUpErrorModel = createStateModel<null | string>(null)\n \n signUp.done.watch(({ result }) => {\n   resetSignUpFormData()\n   apiManager.token.set(tokenResponseToTokens(result.tokens))\n   const myNewProfile = signUpUserResponseToNewUser(result.user)\n   setMyProfile(myNewProfile)\n   signUpErrorModel.reset()\n })\n \n signUp.fail.watch(({ error }) => {\n   const errorDetails = (error as ApiError).data?.detail\n   if (!errorDetails) return\n   if (Array.isArray(errorDetails)) {\n     signUpErrorModel.set(errorDetails.map(({ msg }) => msg).join(', '))\n     return\n   }\n   signUpErrorModel.set(errorDetails)\n })\n"))),(0,s.kt)("h3",{id:"\u043f\u043e-\u043f\u0430\u043f\u043a\u0430\u043c"},"\u041f\u043e \u043f\u0430\u043f\u043a\u0430\u043c"),(0,s.kt)("p",null,"\u0415\u0441\u043b\u0438 \u0444\u0430\u0439\u043b\u043e\u0432 \u043c\u043e\u0434\u0435\u043b\u0438 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e (\u0432 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435 \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432), \u0438\u0445 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043d\u0435\u0441\u0442\u0438 \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e \u043f\u0430\u043f\u043a\u0443 models",(0,s.kt)("br",null),"\n",(0,s.kt)("img",{alt:"img.png",src:n(5534).Z,width:"324",height:"305"})),(0,s.kt)("h2",{id:"\u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435-\u0444\u0430\u0439\u043b\u044b"},"\u0412\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b"),(0,s.kt)("p",null,"\u0412 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0434\u043b\u044f \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043c\u043e\u0434\u0435\u043b\u044f\u043c\u0438 \u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430\u043c\u0438. \u042d\u0442\u043e \u043c\u043e\u0433\u0443\u0442\n\u0431\u044b\u0442\u044c \u0444\u0430\u0439\u043b\u044b types, helpers, utils, constants \u0438 \u043f\u0440. \u0422\u0430\u043a \u0436\u0435 \u043a\u0430\u043a \u0438 \u0441 \u043c\u043e\u0434\u0435\u043b\u044f\u043c\u0438, \u0432\u043d\u0443\u0442\u0440\u0438 \u043e\u0434\u043d\u043e\u0439 \u0444\u0438\u0447\u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e\n\u043e\u0434\u043d\u043e\u0442\u0438\u043f\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432, \u0432 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0435\u0444\u0438\u043a\u0441. \u041e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u043e \u0447\u0442\u043e\u0431\u044b \u0412\u0421\u0415 \u0444\u0430\u0439\u043b\u044b \u043e\u0442\u043d\u043e\u0441\u044f\u0449\u0438\u0435\u0441\u044f \u043a \u0434\u0430\u043d\u043d\u043e\u0439 \u0444\u0438\u0447\u0435\n\u043d\u0430\u0445\u043e\u0434\u0438\u043b\u0438\u0441\u044c \u0432 \u043e\u0434\u043d\u043e\u0439 \u043f\u0430\u043f\u043a\u0435."),(0,s.kt)("h3",{id:"helpers"},"helpers"),(0,s.kt)("p",null,"\u0424\u0430\u0439\u043b\u044b helpers \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442 \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0444\u0438\u0447\u0435\u0439. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0434\u043b\u044f\n\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u0445\u043e\u0434\u044f\u0442 \u0441 \u0431\u044d\u043a\u0430, \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0434\u043b\u044f \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0431\u044d\u043a, \u0444\u0443\u043d\u043a\u0446\u0438\u0438\n\u0434\u043b\u044f \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u043f\u0440. \u041d\u0435 \u0441\u0442\u043e\u0438\u0442 \u043f\u043e\u043c\u0435\u0449\u0430\u0442\u044c \u0432 helpers \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u0430 \u043d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043d\u043d\u043e \u0431\u0438\u0437\u043d\u0435\u0441 \u043b\u043e\u0433\u0438\u043a\u0430\n\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u0422\u0430\u043a\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u043c\u043e\u0434\u0435\u043b\u044f\u0445. "),(0,s.kt)("details",null,(0,s.kt)("summary",null,"\u041f\u0440\u0438\u043c\u0435\u0440"),(0,s.kt)("p",null,"**\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0430\u043f\u043a\u0438"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-text",metastring:'title="src/features/orderManagement"',title:'"src/features/orderManagement"'},"features\n  -- orderManagement\n    --- OrderList.tsx\n    --- DeliveryList.tsx\n    --- model.ts\n    --- helpers.ts\n    --- helpers.delivery.ts\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/orderManagement/helpers.ts"',jsx:!0,title:'"src/features/orderManagement/helpers.ts"'},"export function calculateTotal(orderItems: OrderItem[]): number {\n  return orderItems.reduce((acc, item) => acc + item.price * item.quantity, 0);\n}\n\nexport function getOrderStatus(order: Order): string {\n  if (order.isCanceled) {\n    return '\u041e\u0442\u043c\u0435\u043d\u0435\u043d';\n  }\n  if (order.isDelivered) {\n    return '\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d';\n  }\n  return '\u0412 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435';\n}\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="src/features/orderManagement/helpers.delivery.ts"',jsx:!0,title:'"src/features/orderManagement/helpers.delivery.ts"'},"export function getDeliveryStatus(delivery: Delivery): string {\n  if (delivery.isCompleted) {\n    return '\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430';\n  }\n  if (delivery.isInProgress) {\n    return '\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435';\n  }\n  return '\u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u043d\u0430\u0447\u0430\u043b\u0430';\n}\n\nexport function calculateDeliveryTime(delivery: Delivery): number {\n  const startTime = new Date(delivery.startTime).getTime();\n  const endTime = new Date(delivery.endTime).getTime();\n  return (endTime - startTime) / (60 * 60 * 1000);\n}\n"))),(0,s.kt)("h3",{id:"request"},"request"),(0,s.kt)("details",null,(0,s.kt)("summary",null,"\u041f\u0440\u0438\u043c\u0435\u0440"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="request.ts"',jsx:!0,title:'"request.ts"'},"import { createEffect } from 'effector';\nimport axios from 'axios';\nimport { Article, NewArticle } from './types';\n\nconst API_URL = '/api/articles';\n\nexport const getArticlesFx = createEffect(async (): Promise<Article[]> => {\n  const response = await axios.get<Article[]>(API_URL);\n  return response.data;\n});\n\nexport const getArticleFx = createEffect(async (id: number): Promise<Article> => {\n  const response = await axios.get<Article>(`${API_URL}/${id}`);\n  return response.data;\n});\n\nexport const createArticleFx = createEffect(async (newArticle: NewArticle): Promise<Article> => {\n  const response = await axios.post<Article>(API_URL, newArticle);\n  return response.data;\n});\n\nexport const updateArticleFx = createEffect(async (payload: { id: number; updatedArticle: Partial<Article> }): Promise<Article> => {\n  const { id, updatedArticle } = payload;\n  const response = await axios.put<Article>(`${API_URL}/${id}`, updatedArticle);\n  return response.data;\n});\n\nexport const deleteArticleFx = createEffect(async (id: number): Promise<void> => {\n  await axios.delete(`${API_URL}/${id}`);\n});\n"))),(0,s.kt)("details",null,(0,s.kt)("summary",null,"\u0420\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="request.ts"',jsx:!0,title:'"request.ts"'},"const setLoadsRequestNextUrl = createEvent<string | null>()\nconst $loadsNextUrl = restore(setLoadsRequestNextUrl, null)\n\nexport const $loadRequestParams = combine({\n  filters: $filtersList,\n  vehicle: activeVehicleModel.$state,\n  location: $activeVehicleLocation,\n}).map<null | LoadsListRequestProps>(({ filters, vehicle, location }) => {\n  if (!vehicle || !filters || !filters[vehicle.id]) return null\n  return {\n    vehicle: vehicle.id,\n    filtersUrl: getLoadsUrlParams({\n      filters: filters[vehicle.id],\n      location: location?.last,\n    }),\n  }\n})\n\nconst loadsListRequest = createEffect((url: string) => {\n  return request<LoadRequestResponse>({ url, token: true })\n})\n\nloadsListRequest.done.watch(({ result }) => {\n  setLoadsRequestNextUrl(result.next)\n})\n\nexport const $isLoadsListOnLoading = loadsListRequest.pending\n\nexport const getLoadsList = createEffect((props: LoadsListRequestProps) =>\n  loadsListRequest(urls.loads(props))\n)\n\nexport const getLoadsListNextPage = attach({\n  source: $loadsNextUrl,\n  mapParams: (_: void, url) => url,\n  effect: createEffect((url: string | null) => {\n    if (url) return loadsListRequest(url)\n  }),\n})\n\nexport const reloadLoadsList = attach({\n  source: $loadRequestParams,\n  mapParams: (_: void, source) => source,\n  effect: createEffect((props: LoadsListRequestProps | null) => {\n    if (props) return getLoadsList(props)\n  }),\n})\n\n"))),(0,s.kt)("h3",{id:"types"},"types"),(0,s.kt)("details",null,(0,s.kt)("summary",null,"\u041f\u0440\u0438\u043c\u0435\u0440"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="types.ts"',jsx:!0,title:'"types.ts"'},"import { Point } from '../../../lib/loads/types'\n\nexport enum BidStatus {\n  SENDING = 'Sending',\n  PENDING_LAST = 'PendingLast',\n  RECEIVED_FROM_DISPATCHER = 'ReceivedFromDispatcher',\n  ACCEPTED = 'Accepted',\n  REJECTED = 'Rejected',\n  PENDING = 'Pending',\n  MISSED = 'Missed',\n  CANCELED = 'Canceled',\n  SENDING_ERROR = 'SendingError',\n  WON = 'Won',\n}\n\ntype BidLoad = {\n  id: number\n  miles: number\n  points: Point[]\n}\n\ntype BidDispatcher = {\n  email: string\n  first_name: string\n  id: number\n  last_name: string\n}\n\nexport type BidHistoryItem = {\n  driver: number\n  driver_price: number\n  feedback_by: BidDispatcher | null\n  id: number\n  load: BidLoad\n  status: BidStatus\n  created_date: string\n}\n\nexport type BidsHistoryResponse = {\n  count: number\n  next: string | null\n  previous: string | null\n  results: BidHistoryItem[]\n}\n\n\n"))),(0,s.kt)("p",null,"\u0421\u044e\u0434\u0430 \u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043d\u043e\u0441\u0438\u0442\u044c \u043f\u0440\u043e\u043f\u0441\u044b \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432, \u0435\u0441\u043b\u0438 \u043e\u043d\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043c\u0435\u0441\u0442\u0430\u0445."),(0,s.kt)("details",null,(0,s.kt)("summary",null,"\u041f\u0440\u0438\u043c\u0435\u0440"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="types.ts"',jsx:!0,title:'"types.ts"'},"import { ReactNode } from 'react'\n\nexport type ModalProps = {\n  children: ReactNode\n  isOpen: boolean\n  onClose: () => void\n}\n\n"))),(0,s.kt)("h3",{id:"constants"},"constants"),(0,s.kt)("p",null,"\u0422\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0442\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043a \u044d\u0442\u043e \u0444\u0438\u0447\u0435. \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b \u0432\u044b\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u0432 src/constants \u043b\u0438\u0431\u043e \u0432 src/lib/constants."),(0,s.kt)("details",null,(0,s.kt)("summary",null,"\u041f\u0440\u0438\u043c\u0435\u0440"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'jsx title="types.ts"',jsx:!0,title:'"types.ts"'},"import { SCREEN_CONTENT_WIDTH } from '../../../styles/constants'\n\nexport const DRAWING_ITEM_MARGIN = 20\nexport const DRAWINGS_COLUMNS_COUNT = 2\n\nexport const DRAWING_ITEM_WIDTH =\n  SCREEN_CONTENT_WIDTH / DRAWINGS_COLUMNS_COUNT + DRAWING_ITEM_MARGIN / 2\n\nexport const DRAWING_ITEM_HEIGHT = DRAWING_ITEM_WIDTH\n\n\n"))),(0,s.kt)("admonition",{type:"tip"},(0,s.kt)("p",{parentName:"admonition"},(0,s.kt)("a",{parentName:"p",href:"https://google.github.io/styleguide/jsguide.html#naming-constant-names"},"\u041a\u0430\u043a \u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b"),".")),(0,s.kt)("h3",{id:"styles"},"styles"),(0,s.kt)("h3",{id:"hooks"},"hooks"))}d.isMDXComponent=!0},5534:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/img-ea07da6934443e84b3bda9dbb9b2dd3b.png"}}]);